@page "/{*pageRoute}"

@if (pageModel != null)
{
    <PageBuilder Model="@pageModel"></PageBuilder>
}

@code{
    [Parameter]
    public string PageRoute { get; set; }

    private bool loaded = false;

    private PageResource pageModel;

    protected override void OnParametersSet()
    {
        pageModel = null;
        if (PageRoute != null)
        {
            pageModel = AppConfig.PageBuilder.GetPage(PageRoute);
            if (pageModel != null)
                pageModel.EntityContext = AppConfig.GetEntityContext("testuser");
            loaded = true;
        }
    }
}
